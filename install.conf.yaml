- defaults:
    link:
      create: true
      force: true
      relink: true

- clean:
    ~/:
    ~/.config:
      recursive: true

- create:
    - ~/repos

- link:
    ~/repos/dotfiles:
      path: ''
    ~/.vim:
    ~/.vimrc:
    ~/.zshenv:
    ~/.zsh:
    ~/.bin:
    ~/.ipython:

    ~/.config/:
      glob: true
      path: dotconfig/*

- shell:
    - description: Installing submodules
      command: git submodule update --init --recursive

    - description: Creating dummy git local config
      command: touch dotconfig/git/config.local

    - description: Install starship prompt if necessary
      stderr: true
      command: >
        sh -c 'command -v starship > /dev/null
        || curl -sS https://starship.rs/install.sh | FORCE=1 sh'
